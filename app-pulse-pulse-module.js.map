{"version":3,"sources":["webpack:///./src/app/pulse/components/index.ts","webpack:///./src/app/pulse/components/pulse-graph/index.ts","webpack:///./src/app/pulse/components/pulse-graph/pulse-graph.component.css","webpack:///./src/app/pulse/components/pulse-graph/pulse-graph.component.ts","webpack:///./src/app/pulse/components/start-page/index.ts","webpack:///./src/app/pulse/components/start-page/start-page.component.css","webpack:///./src/app/pulse/components/start-page/start-page.component.html","webpack:///./src/app/pulse/components/start-page/start-page.component.ts","webpack:///./src/app/pulse/pulse-routing.module.ts","webpack:///./src/app/pulse/pulse.module.ts"],"names":[],"mappings":"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","file":"app-pulse-pulse-module.js","sourcesContent":["export * from './pulse-graph';\r\nexport * from './start-page';\r\n","export * from './pulse-graph.component';\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3B1bHNlL2NvbXBvbmVudHMvcHVsc2UtZ3JhcGgvcHVsc2UtZ3JhcGguY29tcG9uZW50LmNzcyJ9 */\"","import { Component, OnInit, Input, Output, EventEmitter, HostListener } from '@angular/core';\r\nimport { GoogleChartPackagesHelper, GoogleChartComponent, ChartEvent } from 'angular-google-charts';\r\nimport { IPulseGraphData } from '@gb/pulse';\r\n\r\n\r\n@Component({\r\n  selector: 'gb-pulse-graph',\r\n  template: `\r\n<google-chart   \r\n  [dynamicResize]=\"true\"\r\n  [title]= \"title\"\r\n  [type]= \"chartType\"\r\n  [columnNames]= \"data.Data.columns.titles\"\r\n  [data]= \"data.Data.values\"\r\n  [options]=\"options\"\r\n  (select)=\"chartSelected($event)\"\r\n>\r\n</google-chart>\r\n  `,\r\n  styleUrls: ['./pulse-graph.component.css']\r\n})\r\nexport class PulseGraphComponent implements OnInit {\r\n  @Input()\r\n  chartType = \"PieChart\";\r\n\r\n  @Input() data: IPulseGraphData;\r\n  @Input() title: string = \"\";\r\n\r\n  @Output() onSelected = new EventEmitter<string>();\r\n  options = {\r\n    legend: {\r\n      position: 'bottom',\r\n    },\r\n  };\r\n\r\n  chartSelected(ev:ChartEvent[]){\r\n    console.log(`${this.data.Data.values[ev[0].column,ev[0].row]} // ${ev[0].column}, ${ev[0].row}`);\r\n    let col = ev[0].column;\r\n    let row = ev[0].row;\r\n\r\n    console.log(this.data.Data.values[row][col]);\r\n    \r\n    \r\n    this.onSelected.emit(ev[0].toString());\r\n  }\r\n\r\n\r\n  constructor() {\r\n\r\n\r\n  }\r\n\r\n\r\n  ngOnInit() {\r\n\r\n  }\r\n\r\n}\r\n","export * from './start-page.component';\r\n","module.exports = \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL3B1bHNlL2NvbXBvbmVudHMvc3RhcnQtcGFnZS9zdGFydC1wYWdlLmNvbXBvbmVudC5jc3MifQ== */\"","module.exports = \"<div class=\\\"container-fluid\\\">\\r\\n    <div class=\\\"h3\\\">Карта дня</div>\\r\\n    <div class=\\\"row\\\">\\r\\n        <div class=\\\"col-6\\\"><gb-pulse-graph title=\\\"Сеогдня\\\" [data]=\\\"data$['today'] | async\\\" (onSelected)=\\\"onGraphClicked($event)\\\"></gb-pulse-graph></div>\\r\\n        <!-- <div class=\\\"col\\\"><gb-pulse-graph title=\\\"В работе\\\" [data]=\\\"data$['inWork'] | async\\\" (onSelected)=\\\"onSelect($event)\\\"></gb-pulse-graph></div> -->\\r\\n        <!-- <div class=\\\"col\\\"><gb-pulse-graph title=\\\"Завершенные\\\" [data]=\\\"data$['finished'] | async\\\" (onSelected)=\\\"onSelect($event)\\\"></gb-pulse-graph></div> -->\\r\\n    </div>\\r\\n    <p></p>\\r\\n    <div class=\\\"row\\\">\\r\\n        <div class=\\\"col-12 h4\\\">Подробности</div>        \\r\\n        <gb-event-table class=\\\"col-12\\\" \\r\\n            [events]=\\\"selectedEvents$ | async\\\"\\r\\n            (selected)=\\\"onRowClicked($event)\\\"\\r\\n        ></gb-event-table>    \\r\\n    </div>\\r\\n</div>\"","import { Component, OnInit, ChangeDetectionStrategy } from '@angular/core';\r\nimport { Observable } from 'rxjs/internal/Observable';\r\nimport { of } from 'rxjs';\r\nimport { delay, subscribeOn } from 'rxjs/operators';\r\nimport { IPulseGraphData } from '@gb/pulse';\r\nimport { EventDto } from '@gb/models';\r\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap';\r\nimport { ModalComponent } from '@gb/gb-common';\r\nimport { EventEditorComponent } from '@gb/occasions';\r\nimport { Router } from '@angular/router';\r\nimport { EventsService } from '@gb/services/events.service';\r\nimport { Store } from '@ngxs/store';\r\nimport { BeginEdit } from '@gb/gb-common/state/edit/event.state';\r\n\r\n@Component({\r\n  selector: 'gb-start-page',\r\n  changeDetection: ChangeDetectionStrategy.OnPush,\r\n  templateUrl: './start-page.component.html',\r\n  styleUrls: ['./start-page.component.css']\r\n})\r\nexport class StartPageComponent implements OnInit {\r\n  public data$: {\r\n    today: Observable<IPulseGraphData>;\r\n    week: Observable<IPulseGraphData>;\r\n    Month: Observable<IPulseGraphData>;\r\n  };\r\n\r\n  selectedEvents$ = of(new Array<EventDto>());\r\n\r\n  GetToday(): Observable<IPulseGraphData> {\r\n    const data = {} as IPulseGraphData;\r\n    data.SliceKey = 'today';\r\n    data.Data = {\r\n      columns: { titles: ['Статус', 'Сегодня', 'Вчера', '-7 дней'] },\r\n      rows: ['state', 'today', 'yesterday', '7days_ago'],\r\n      values: [['Новые', 10, 6, 3], ['В работе', 6, 9, 3], ['Решено', 3, 5, 8]]\r\n    };\r\n\r\n    return of(data);\r\n  }\r\n\r\n  constructor(\r\n    private modalService: NgbModal,\r\n    private eventService: EventsService,\r\n    private router: Router,\r\n    private store: Store\r\n  ) {\r\n    this.data$ = {\r\n      today: this.GetToday(),\r\n      week: of({ SliceKey: 'inWork' }),\r\n      Month: of({ SliceKey: 'finished' })\r\n    };\r\n  }\r\n\r\n  ngOnInit() {}\r\n\r\n  onRowClicked(rows: EventDto[]) {\r\n    this.router.navigate(['/', 'occasions', 'edit', rows[0].id]);\r\n  }\r\n\r\n  onGraphClicked($event: object) {\r\n    console.log('start-page', $event);\r\n    this.selectedEvents$ = this.eventService.find({});\r\n    // .pipe(delay(200))\r\n  }\r\n}\r\n","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\nimport { StartPageComponent } from './components/start-page/start-page.component';\r\n\r\n\r\nconst routes: Routes = [\r\n  { path: '', component: StartPageComponent },\r\n  { path: 'start', component: StartPageComponent }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class PulseRoutingModule { }\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { GoogleChartsModule } from 'angular-google-charts';\r\nimport { GbCommonModule, ModalComponent } from '@gb/gb-common';\r\nimport { StartPageComponent, PulseGraphComponent } from './components';\r\nimport { PulseRoutingModule } from './pulse-routing.module';\r\nimport { OccasionsModule, EventEditorComponent } from '@gb/occasions';\r\n\r\n\r\n\r\n\r\n@NgModule({\r\n  declarations: [StartPageComponent, PulseGraphComponent],\r\n  imports: [\r\n    CommonModule,\r\n    GoogleChartsModule,\r\n    PulseRoutingModule,\r\n    GbCommonModule,\r\n    OccasionsModule \r\n  ],\r\n  entryComponents:[ModalComponent,EventEditorComponent],\r\n})\r\nexport class PulseModule { }\r\n"],"sourceRoot":""}